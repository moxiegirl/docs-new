---
title: blockstack JS 18.0.4
---
<!doctype html>
<html>
<!DOCTYPE html>
<html lang="en">

    <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!-- Begin Jekyll SEO tag v2.5.0 -->
<meta name="generator" content="Jekyll v3.4.1" />
<meta property="og:title" content="Address-based Access-Control" />
<meta name="author" content="Blockstack" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Access control in a gaia storage hub is performed on a per-address basis. Writes to URLs /store/&lt;address&gt;/&lt;file&gt; are only allowed if the writer can demonstrate that they control that address. This is achieved via an authentication token, which is a message signed by the private-key associated with that address. The message itself is a challenge-text, returned via the /hub_info/ endpoint." />
<meta property="og:description" content="Access control in a gaia storage hub is performed on a per-address basis. Writes to URLs /store/&lt;address&gt;/&lt;file&gt; are only allowed if the writer can demonstrate that they control that address. This is achieved via an authentication token, which is a message signed by the private-key associated with that address. The message itself is a challenge-text, returned via the /hub_info/ endpoint." />
<link rel="canonical" href="http://localhost:4000/gaia/access/" />
<meta property="og:url" content="http://localhost:4000/gaia/access/" />
<meta property="og:site_name" content="Blockstack" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2018-08-09T07:25:17-07:00" />
<script type="application/ld+json">
{"description":"Access control in a gaia storage hub is performed on a per-address basis. Writes to URLs /store/&lt;address&gt;/&lt;file&gt; are only allowed if the writer can demonstrate that they control that address. This is achieved via an authentication token, which is a message signed by the private-key associated with that address. The message itself is a challenge-text, returned via the /hub_info/ endpoint.","author":{"@type":"Person","name":"Blockstack"},"@type":"BlogPosting","url":"http://localhost:4000/gaia/access/","headline":"Address-based Access-Control","dateModified":"2018-08-09T07:25:17-07:00","datePublished":"2018-08-09T07:25:17-07:00","mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/gaia/access/"},"@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->

  <meta property="og:image" content="http://localhost:4000/assets/posts/logo.png"/>
  <link rel="stylesheet" href="/assets/css/main.css">
  <link rel="shortcut icon" type="image/png" href="/assets/img/favicon.png" >
  <link rel="alternate" type="application/rss+xml" title="Blockstack" href="/feed.xml">
  <script src="/assets/js/main.js"></script>
  <meta charset='utf-8' />
  <title>blockstack 18.0.4 | Documentation</title>
  <meta name='viewport' content='width=device-width,initial-scale=1'>
  <link href='../assets/bass.css' type='text/css' rel='stylesheet' />
  <link href='../assets/style.css' type='text/css' rel='stylesheet' />
  <link href='../assets/github.css' type='text/css' rel='stylesheet' />
  <link href='../assets/split.css' type='text/css' rel='stylesheet' />
</head>
<body class='documentation m0'>
  <header class="uk-background-secondary">
    <div data-uk-sticky="sel-target: .uk-navbar-container; cls-active: uk-navbar-sticky" class="uk-sticky uk-sticky-fixed" style="position: fixed; top: 0px; width: 1264px;">
        <nav class="uk-navbar-container">
            <div class="uk-container">
    <div data-uk-navbar="" class="uk-navbar">
        <div class="uk-navbar-left">

            <a class="uk-navbar-item uk-logo" href="/"><img src="http://localhost:4000/assets/posts/logo.png" alt="Docs"></a>

        </div>
        <div class="uk-navbar-right">
            <ul class="uk-navbar-nav uk-visible@m">




                        <li><a href="/">Support</a></li>





                        <li><a href="/news/">Company</a></li>





                        <li><a href="/changelog/">Changelog</a></li>





                        <li><a href="/contact/">Contact</a></li>


            </ul>


            <div>
                <a class="uk-navbar-toggle uk-search-icon uk-icon" uk-search-icon="" href="#"><svg width="20" height="20" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" ratio="1"><circle fill="none" stroke="#000" stroke-width="1.1" cx="9" cy="9" r="7"></circle><path fill="none" stroke="#000" stroke-width="1.1" d="M14,14 L18,18 L14,14 Z"></path></svg></a>
                <div class="uk-drop uk-background-default uk-border-rounded" uk-drop="mode: click; pos: left-center; offset: 0">
                    <form class="uk-search uk-search-navbar uk-width-1-1" onsubmit="return false;">
                        <input id="searchBox" class="uk-search-input" type="search" placeholder="Search..." autofocus="">
                    </form>
                    <ul id="searchBox-results" class="uk-position-absolute uk-width-1-1 uk-list"></ul>
                </div>
            </div>
            <script>
            SimpleJekyllSearch({
                searchInput: document.getElementById('searchBox'),
                resultsContainer: document.getElementById('searchBox-results'),
                noResultsText: '<li>No results found</li>',
                searchResultTemplate: '<li><a href="{url}">{title}</a></li>',
                json: '/search.json'
            });
            </script>


            <a class="uk-navbar-toggle uk-hidden@m uk-navbar-toggle-icon uk-icon" href="#offcanvas" data-uk-navbar-toggle-icon="" data-uk-toggle=""><svg width="20" height="20" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" ratio="1"><rect y="9" width="20" height="2"></rect><rect y="3" width="20" height="2"></rect><rect y="15" width="20" height="2"></rect></svg></a>

        </div>
    </div>
    </div>

        </nav>
</header>
    <div class='flex' style="background:white!important">
      <div id='split-left' class='overflow-auto fs0 height-viewport-100'>
        <div class='py1 px2'>
          <h3 class='mb0 no-anchor'>blockstack</h3>
          <div class='mb1'><code>18.0.4</code></div>
          <input
            placeholder='Filter'
            id='filter-input'
            class='col12 block input'
            type='text' />
          <div id='toc'>
            <ul class='list-reset h5 py1-ul'>


                <li><a
                  href='#authentication'
                  class="h5 bold black caps">
                  Authentication

                </a>

                </li>


                <li><a
                  href='#redirecttosignin'
                  class="">
                  redirectToSignIn

                </a>

                </li>


                <li><a
                  href='#issigninpending'
                  class="">
                  isSignInPending

                </a>

                </li>


                <li><a
                  href='#handlependingsignin'
                  class="">
                  handlePendingSignIn

                </a>

                </li>


                <li><a
                  href='#loaduserdata'
                  class="">
                  loadUserData

                </a>

                </li>


                <li><a
                  href='#isusersignedin'
                  class="">
                  isUserSignedIn

                </a>

                </li>


                <li><a
                  href='#signuserout'
                  class="">
                  signUserOut

                </a>

                </li>


                <li><a
                  href='#makeauthrequest'
                  class="">
                  makeAuthRequest

                </a>

                </li>


                <li><a
                  href='#redirecttosigninwithauthrequest'
                  class="">
                  redirectToSignInWithAuthRequest

                </a>

                </li>


                <li><a
                  href='#getauthresponsetoken'
                  class="">
                  getAuthResponseToken

                </a>

                </li>


                <li><a
                  href='#profiles'
                  class="h5 bold black caps">
                  Profiles

                </a>

                </li>


                <li><a
                  href='#extractprofile'
                  class="">
                  extractProfile

                </a>

                </li>


                <li><a
                  href='#wrapprofiletoken'
                  class="">
                  wrapProfileToken

                </a>

                </li>


                <li><a
                  href='#signprofiletoken'
                  class="">
                  signProfileToken

                </a>

                </li>


                <li><a
                  href='#verifyprofiletoken'
                  class="">
                  verifyProfileToken

                </a>

                </li>


                <li><a
                  href='#validateproofs'
                  class="">
                  validateProofs

                </a>

                </li>


                <li><a
                  href='#lookupprofile'
                  class="">
                  lookupProfile

                </a>

                </li>


                <li><a
                  href='#storage'
                  class="h5 bold black caps">
                  Storage

                </a>

                </li>


                <li><a
                  href='#getfile'
                  class="">
                  getFile

                </a>

                </li>


                <li><a
                  href='#putfile'
                  class="">
                  putFile

                </a>

                </li>


                <li><a
                  href='#encryptcontent'
                  class="">
                  encryptContent

                </a>

                </li>


                <li><a
                  href='#decryptcontent'
                  class="">
                  decryptContent

                </a>

                </li>


                <li><a
                  href='#getappbucketurl'
                  class="">
                  getAppBucketUrl

                </a>

                </li>


                <li><a
                  href='#getuserappfileurl'
                  class="">
                  getUserAppFileUrl

                </a>

                </li>

            </ul>
          </div>
          <div class='mt1 h6 quiet'>
            <a href='http://documentation.js.org/reading-documentation.html'>Need help reading this?</a>
          </div>
        </div>
      </div>
      <div id='split-right' class='relative overflow-auto height-viewport-100'>


            <div class='keyline-top-not py2'><section class='py2 clearfix'>

  <h2 id='authentication' class='mt0'>
    Authentication
  </h2>


    <p>Blockstack Authentication provides single sign on and authentication without third parties or remote servers. Blockstack Authentication is a bearer token-based authentication system. From an app user's perspective, it functions similar to legacy third-party authentication techniques that they're familiar with. For an app developer, the flow is a bit different from the typical client-server flow of centralized sign in services (e.g., OAuth). Rather, with Blockstack, the authentication flow happens entirely client-side.</p>
<h2>Quickstart</h2>
<p>1) Install <code>blockstack.js</code>:</p>
<pre class='hljs'>npm install blockstack --save</pre>
<p>2) Import Blockstack into your project</p>
<pre class='hljs'><span class="hljs-keyword">import</span> * <span class="hljs-keyword">as</span> blockstack <span class="hljs-keyword">from</span> <span class="hljs-string">'blockstack'</span></pre>
<p>3) Wire up a sign in button</p>
<pre class='hljs'><span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">'signin-button'</span>).addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
  blockstack.redirectToSignIn()
})</pre>
<p>4) Wire up a sign out button</p>
<pre class='hljs'><span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">'signout-button'</span>).addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
  blockstack.signUserOut(<span class="hljs-built_in">window</span>.location.origin)
})</pre>
<p>5) Include the logic to (a) load user data (b) handle the auth response</p>
<pre class='hljs'><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">showProfile</span>(<span class="hljs-params">profile</span>) </span>{
  <span class="hljs-keyword">var</span> person = <span class="hljs-keyword">new</span> blockstack.Person(profile)
  <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">'heading-name'</span>).innerHTML = person.name()
  <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">'avatar-image'</span>).setAttribute(<span class="hljs-string">'src'</span>, person.avatarUrl())
  <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">'section-1'</span>).style.display = <span class="hljs-string">'none'</span>
  <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">'section-2'</span>).style.display = <span class="hljs-string">'block'</span>
}

<span class="hljs-keyword">if</span> (blockstack.isUserSignedIn()) {
  <span class="hljs-keyword">const</span> userData = blockstack.loadUserData()
  showProfile(userData.profile)
} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (blockstack.isSignInPending()) {
  blockstack.handlePendingSignIn()
  .then(<span class="hljs-function"><span class="hljs-params">userData</span> =&gt;</span> {
    showProfile(userData.profile)
  })
}</pre>
<p>6) Create a <code>manifest.json</code> file</p>
<pre class='hljs'>{
  <span class="hljs-attr">"name"</span>: <span class="hljs-string">"Hello, Blockstack"</span>,
  <span class="hljs-attr">"start_url"</span>: <span class="hljs-string">"localhost:5000"</span>,
  <span class="hljs-attr">"description"</span>: <span class="hljs-string">"A simple demo of Blockstack Auth"</span>,
  <span class="hljs-attr">"icons"</span>: [{
    <span class="hljs-attr">"src"</span>: <span class="hljs-string">"https://helloblockstack.com/icon-192x192.png"</span>,
    <span class="hljs-attr">"sizes"</span>: <span class="hljs-string">"192x192"</span>,
    <span class="hljs-attr">"type"</span>: <span class="hljs-string">"image/png"</span>
  }]
}</pre>
<p>Make sure your <code>manifest.json</code> file has appropriate CORS headers so that it can
be fetched via an http <code>GET</code> from any origin.</p>
<p>7) Serve your application</p>
<h2>User flow</h2>
<p>What follows is a walk through of the experience of a user, Alice, signing in to your app with Blockstack.</p>
<p>First, Alice clicks the "Sign in with Blockstack" button on your app. She is redirected to her copy of the Blockstack Browser. The Blockstack Browser shows Alice an approval dialog with information about your app including:</p>
<ul>
<li>The origin your app was served from</li>
<li>Your app's name</li>
<li>Your app's logo</li>
<li>The types of permissions and data your app is requesting</li>
</ul>
<p>Alice can choose to authenticate as one of her Blockstack IDs by selecting the ID and clicking the Approve button.</p>
<p>When she clicks approve, she's redirected back to your app. Your app gets cryptographic proof that she is who she claims to be, access to a dedicated bucket in her Gaia storage hub for your app to read and write its own data along with public information she's stored in her profile.</p>
<h2>Manifest file</h2>
<p>Blockstack apps have a manifest file based on the <a href="https://w3c.github.io/manifest/">W3C web app manifest specification</a>. The Blockstack Browser retrieves the manifest file from the app during the authentication process and displays some of the information in it such as the app name and icon to the user. The location of the app manifest file is specific in the authentication request token and <em>MUST</em> be on the same origin as the app requesting authentication.</p>
<p>Below is an example of a manifest file:</p>
<pre><code>{
  "name": "Todo App",
  "start_url": "http://blockstack-todos.appartisan.com",
  "description": "A simple todo app build on blockstack",
  "icons": [{
    "src": "http://blockstack-todos.appartisan.com/logo.png",
    "sizes": "400x400",
    "type": "image/png"
  }]
}
</code></pre>
<p>The manifest file <em>MUST</em> have <a href="https://en.wikipedia.org/wiki/Cross-origin_resource_sharing">Cross-origin resource sharing (CORS) headers</a> that allow the manifest file to be fetched from any arbitrary source. This usually means returning:</p>
<pre><code>Access-Control-Allow-Origin: *
</code></pre>
<h2>Key pairs</h2>
<p>Blockstack Authentication makes extensive use of public key cryptography. As mentioned above, we use ECDSA with the secp256k1 curve. What follows is a description of the various public-private key pairs used in the authentication process including how they're generated, where they're used and to whom the private key is disclosed.</p>
<h3>Transit private key</h3>
<p>The transit private is an ephemeral key that is used to encrypt secrets that need to be passed from the Blockstack Browser to the app during the authentication process. It is randomly generated by the app at the beginning of the authentication response. The public key that corresponds to the transit private key is stored in a single element array in the <code>public_keys</code> key of the authentication request token. The Blockstack Browser encrypts secret data such as the app private key using this public key and sends it back to the app when the user signs in to the app. The transit private key signs the app authentication request.</p>
<h3>Blockstack ID Identity address private key</h3>
<p>The identity address private key is derived from the user's keychain phrase and is the private key of the Blockstack ID that the user chooses to use to sign in to the app. It is a secret owned by the user and never leaves the user's instance of the Blockstack browser. This private key signs the authentication response token for an app to indicate that the user approves sign in to that app.</p>
<h3>App private key</h3>
<p>The app private key is an app-specific private key that is generated from the user's identity address private key using the <code>domain_name</code> as input. It is deterministic in that for a given Blockstack ID and <code>domain_name</code>, the same private key will be generated each time. The app private key is securely shared with the app on each authentication, encrypted by the Blockstack browser with the transit public key.</p>
<p>The app private key serves three functions.</p>
<ul>
<li>It is used to create the credentials that give an app access to the gaia hub storage bucket for that specific app.</li>
<li>It is used in the end-to-end encryption of files stored for the app on the user's gaia hub.</li>
<li>It serves as a cryptographic secret that apps can use to perform other cryptographic functions.</li>
</ul>
<h2>Scopes</h2>
<p>Scopes define the information and permissions an app requests from the
user during authentication. Requested scopes may be any of the following:</p>
<ul>
<li>
<p><code>store_write</code> - read and write data to the user's Gaia hub in an app-specific storage bucket</p>
</li>
<li>
<p><code>publish_data</code> - publish data so that other users of the app can discover and interact with the user</p>
</li>
<li>
<p><code>email</code> - requests the user's email if available</p>
<p> If no <code>scopes</code> array is provided to the <code>redirectToSignIn</code> or
<code>makeAuthRequest</code> functions, the default is to request <code>['store_write']</code>.</p>
</li>
</ul>
<h2>Authentication tokens</h2>
<p>The app and the Blockstack Browser communicate during the authentication flow by passing back and forth two tokens:</p>
<p>The requesting application sends the Blockstack Browser an authRequest token.
Once a user approves a sign in, the Blockstack Browser responds to the application with an authResponse token.</p>
<p>These tokens are <a href="https://jwt.io/">JSON Web Tokens</a>, and they are passed via URL query strings.</p>
<h3>JSON Web Token signatures</h3>
<p>Blockstack's authentication tokens are based on the <a href="https://tools.ietf.org/html/rfc7519">RFC 7519 OAuth JSON Web Token (JWT)</a> with additional support for the secp256k1 curve used by bitcoin and many other cryptocurrencies.</p>
<p>This signature algorithm is indicated by specifying <code>ES256K</code> in the token's <code>alg</code> key, specifying that the JWT signature uses ECDSA with the secp256k1 curve. We provide both <a href="https://github.com/blockstack/jsontokens-js">JavaScript</a> and <a href="https://github.com/blockstack/ruby-jwt-blockstack/tree/ruby-jwt-blockstack">Ruby</a> JWT libraries with support for this signing algorithm.</p>
<h3>Authentication request payload schema</h3>
<pre class='hljs'><span class="hljs-keyword">const</span> requestPayload = {
    jti, <span class="hljs-comment">// UUID</span>
    iat, <span class="hljs-comment">// JWT creation time in seconds</span>
    exp, <span class="hljs-comment">// JWT expiration time in seconds</span>
    iss, <span class="hljs-comment">// legacy decentralized identifier generated from transit key</span>
    public_keys, <span class="hljs-comment">// single entry array with public key of transit key</span>
    domain_name, <span class="hljs-comment">// app origin</span>
    manifest_uri, <span class="hljs-comment">// url to manifest file - must be hosted on app origin</span>
    redirect_uri, <span class="hljs-comment">// url to which browser redirects user on auth approval - must be hosted on app origin</span>
    version, <span class="hljs-comment">// version tuple</span>
    do_not_include_profile, <span class="hljs-comment">// a boolean flag asking browser to send profile url instead of profile object</span>
    supports_hub_url, <span class="hljs-comment">// a boolean flag indicating gaia hub support</span>
    scopes <span class="hljs-comment">// an array of string values indicating scopes requested by the app</span>
  }</pre>
<h3>Authentication response payload schema</h3>
<pre class='hljs'>    <span class="hljs-keyword">const</span> responsePayload = {
    jti, <span class="hljs-comment">// UUID</span>
    iat, <span class="hljs-comment">// JWT creation time in seconds</span>
    exp, <span class="hljs-comment">// JWT expiration time in seconds</span>
    iss, <span class="hljs-comment">// legacy decentralized identifier (string prefix + identity address) - this uniquely identifies the user</span>
    private_key, <span class="hljs-comment">// encrypted private key payload</span>
    public_keys, <span class="hljs-comment">// single entry array with public key</span>
    profile, <span class="hljs-comment">// profile object or null if passed by profile_url</span>
    username, <span class="hljs-comment">// blockstack id username (if any)</span>
    core_token, <span class="hljs-comment">// encrypted core token payload</span>
    email, <span class="hljs-comment">// email if email scope is requested &amp; email available</span>
    profile_url, <span class="hljs-comment">// url to signed profile token</span>
    hubUrl, <span class="hljs-comment">// url pointing to user's gaia hub</span>
    version <span class="hljs-comment">// version tuple</span>
  }</pre>
<h2><code>blockstack:</code> custom protocol handler</h2>
<p>The <code>blockstack:</code> custom protocol handler is how Blockstack apps send their authentication requests to the Blockstack Browser. When the Blockstack Browser is installed on a user's computer, it registers itself as the handler for the <code>blockstack:</code> customer protocol.</p>
<p>When an application calls <a href="http://blockstack.github.io/blockstack.js/index.html#redirecttosignin"><code>redirectToSignIn</code></a> or <a href="http://blockstack.github.io/blockstack.js/index.html#redirecttosigninwithauthrequest"><code>redirectToSignInWithAuthRequest</code></a>, blockstack.js checks if a blockstack: protocol handler is installed and, if so, redirects the user to <code>blockstack:&#x3C;authRequestToken></code>. This passes the authentication request token from the app to the Blockstack Browser, which will in turn validate the request and display an authentication dialog.</p>
<h2>Adding Blockstack Authentication to your app</h2>
<p>The way you can add Blockstack Authentication to you app depends on whether your app is a modern decentralized Blockstack App where code runs client-side without trusted servers or a legacy client-server app where a server is trusted.</p>
<h3>Authentication in Client-side apps</h3>
<p>This method is appropriate for decentralized client-side apps where the user's zone of trust - the parts of the app that the user is trusting - begins and ends with the code running on their own computer. In apps like these, any code the app interacts with that's not on their own computer such as external servers does not need to know who she is.</p>
<p><a href="https://github.com/blockstack/blockstack.js">Blockstack.js</a> provides API methods that help you to implement Blockstack Authentication in your client-side app.</p>
<h4>Standard flow</h4>
<p>The preferred way to implement authentication in these apps is to use the standard flow. This flow hides much of the process behind a few easy function calls and makes it very fast to get up and running.</p>
<p>In this process you'll use these four functions:</p>
<ul>
<li><code>redirectToSignIn</code></li>
<li><code>isSignInPending</code></li>
<li><code>handlePendingSignIn</code></li>
<li><code>loadUserData</code></li>
</ul>
<h5>Starting the sign in process</h5>
<p>When your app wants to start the sign in process, typically when the user clicks a "Sign in with Blockstack" button, your app will call the <a href="http://blockstack.github.io/blockstack.js/index.html#redirecttosignin"><code>redirectToSignIn</code></a> method of <a href="https://github.com/blockstack/blockstack.js">blockstack.js</a>.</p>
<p>This creates an ephemeral transit key, stores it in the web browser's <code>localStorage</code>, uses it to create an authentication request token and finally redirects the user to the Blockstack browser to approve the sign in request.</p>
<h5>Handling an authentication response</h5>
<p>When a user approves a sign in request, the Blockstack Browser will return the signed authentication response token to the <code>redirectURI</code> specified in <code>redirectToSignIn</code>.</p>
<p>To check for the presence of this token, your app should call <code>isSignInPending</code>. If this returns <code>true</code>, the app should then call <code>handlePendingSignIn</code>. This decodes the token, returns the signed-in-user's data, and simultaneously storing it to <code>localStorage</code> so that it can be retrieved later with <code>loadUserData</code>.</p>
<pre class='hljs'><span class="hljs-keyword">import</span> * <span class="hljs-keyword">as</span> blockstack <span class="hljs-keyword">from</span> <span class="hljs-string">'blockstack'</span>

<span class="hljs-keyword">if</span> (blockstack.isSignInPending()) {
    blockstack.handlePendingSignIn()
    .then(<span class="hljs-function"><span class="hljs-params">userData</span> =&gt;</span> {
        <span class="hljs-keyword">const</span> profile = userData.profile
    })
}</pre>
<h4>Manual flow</h4>
<p>Alternatively, you can manually generate your own transit private key and/or authentication request token. This gives you more control over the experience.</p>
<p>For example, you could use the following code to generate an authentication request on <code>https://alice.example.com</code> or <code>https://bob.example.com</code> for an app running on origin <code>https://example.com</code>.</p>
<pre class='hljs'><span class="hljs-keyword">const</span> transitPrivateKey = generateAndStoreTransitKey()
<span class="hljs-keyword">const</span> redirectURI = <span class="hljs-string">'https://example.com/authLandingPage'</span>
<span class="hljs-keyword">const</span> manifestURI = <span class="hljs-string">'https://example.com/manifest.json'</span>
<span class="hljs-keyword">const</span> scopes = [<span class="hljs-string">'scope_write'</span>, <span class="hljs-string">'publish_data'</span>]
<span class="hljs-keyword">const</span> appDomain = <span class="hljs-string">'https://example.com'</span>

<span class="hljs-keyword">const</span> authRequest = makeAuthRequest(transitPrivateKey, redirectURI, manifestURI, scopes, appDomain)

redirectToSignInWithAuthRequest(authRequest)</pre>
<h3>Authentication in client-server apps</h3>
<p><em>Note: Client-server authentication requires using a library written in the language of your server app. There are private methods in blockstack.js that can be accomplish this on node.js server apps, but they are not currently part of our public, supported API.</em></p>
<p>Using Blockstack Authentication in client-server apps is very similar to client-side apps. You generate the authentication request using the same code in the client as described above.</p>
<p>The main difference is that you need to verify the authentication response token on the server after the user approves sign in to your app.</p>
<p>For an example of how verification can be done server side, take a look at the <a href="https://github.com/blockstack/blockstack-ruby#to-verify-an-auth-response">blockstack-ruby</a> library.</p>


</section>
</div>



            <section class='p2 mb2 clearfix bg-white minishadow'>


  <div class='clearfix'>

    <h3 class='fl m0' id='redirecttosignin'>
      redirectToSignIn
    </h3>


  </div>


  <p>Generates an authentication request and redirects the user to the Blockstack
browser to approve the sign in request.</p>
<p>Please note that this requires that the web browser properly handles the
<code>blockstack:</code> URL protocol handler.</p>
<p>Most applications should use this
method for sign in unless they require more fine grained control over how the
authentication request is generated. If your app falls into this category,
use <code>makeAuthRequest</code> and <code>redirectToSignInWithAuthRequest</code> to build your own sign in process.</p>


  <div class='pre p1 fill-light mt0'>redirectToSignIn(redirectURI: <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String">String</a>, manifestURI: <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String">String</a>, scopes: <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array">Array</a>): void</div>











    <div class='py1 quiet mt1 prose-big'>Parameters</div>
    <div class='prose'>

        <div class='space-bottom0'>
          <div>
            <span class='code bold'>redirectURI</span> <code class='quiet'>(<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String">String</a>
            = <code>`${window.location.origin}/`</code>)</code>
	    The location to which the identity provider will redirect the user after
the user approves sign in.

          </div>

        </div>

        <div class='space-bottom0'>
          <div>
            <span class='code bold'>manifestURI</span> <code class='quiet'>(<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String">String</a>
            = <code>`${window.location.origin}/manifest.json`</code>)</code>
	    Location of the manifest file.

          </div>

        </div>

        <div class='space-bottom0'>
          <div>
            <span class='code bold'>scopes</span> <code class='quiet'>(<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array">Array</a>
            = <code>DEFAULT_SCOPE</code>)</code>
	    Defaults to requesting write access to
this app's data store.
An array of strings indicating which permissions this app is requesting.

          </div>

        </div>

    </div>






      <div class='py1 quiet mt1 prose-big'>Returns</div>
      <code>void</code>:















</section>




            <section class='p2 mb2 clearfix bg-white minishadow'>


  <div class='clearfix'>

    <h3 class='fl m0' id='issigninpending'>
      isSignInPending
    </h3>


  </div>


  <p>Check if there is a authentication request that hasn't been handled.</p>


  <div class='pre p1 fill-light mt0'>isSignInPending(): <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Boolean">Boolean</a></div>
















      <div class='py1 quiet mt1 prose-big'>Returns</div>
      <code><a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Boolean">Boolean</a></code>:
        <code>true</code>
 if there is a pending sign in, otherwise
<code>false</code>














</section>




            <section class='p2 mb2 clearfix bg-white minishadow'>


  <div class='clearfix'>

    <h3 class='fl m0' id='handlependingsignin'>
      handlePendingSignIn
    </h3>


  </div>


  <p>Try to process any pending sign in request by returning a <code>Promise</code> that resolves
to the user data object if the sign in succeeds.</p>


  <div class='pre p1 fill-light mt0'>handlePendingSignIn(nameLookupURL: <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String">String</a>, authResponseToken: <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String">String</a>, transitKey: <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String">String</a>): <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise">Promise</a></div>











    <div class='py1 quiet mt1 prose-big'>Parameters</div>
    <div class='prose'>

        <div class='space-bottom0'>
          <div>
            <span class='code bold'>nameLookupURL</span> <code class='quiet'>(<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String">String</a>
            = <code>&#39;https://core.blockstack.org/v1/names/&#39;</code>)</code>
	    the endpoint against which to verify public
keys match claimed username

          </div>

        </div>

        <div class='space-bottom0'>
          <div>
            <span class='code bold'>authResponseToken</span> <code class='quiet'>(<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String">String</a>
            = <code>getAuthResponseToken()</code>)</code>
	    the signed authentication response token

          </div>

        </div>

        <div class='space-bottom0'>
          <div>
            <span class='code bold'>transitKey</span> <code class='quiet'>(<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String">String</a>
            = <code>getTransitKey()</code>)</code>
	    the transit private key that corresponds to the transit public key
that was provided in the authentication request

          </div>

        </div>

    </div>






      <div class='py1 quiet mt1 prose-big'>Returns</div>
      <code><a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise">Promise</a></code>:
        that resolves to the user data object if successful and rejects
if handling the sign in request fails or there was no pending sign in request.














</section>




            <section class='p2 mb2 clearfix bg-white minishadow'>


  <div class='clearfix'>

    <h3 class='fl m0' id='loaduserdata'>
      loadUserData
    </h3>


  </div>


  <p>Retrieves the user data object. The user's profile is stored in the key <code>profile</code>.</p>


  <div class='pre p1 fill-light mt0'>loadUserData(): <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object">Object</a></div>
















      <div class='py1 quiet mt1 prose-big'>Returns</div>
      <code><a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object">Object</a></code>:
        User data object.














</section>




            <section class='p2 mb2 clearfix bg-white minishadow'>


  <div class='clearfix'>

    <h3 class='fl m0' id='isusersignedin'>
      isUserSignedIn
    </h3>


  </div>


  <p>Check if a user is currently signed in.</p>


  <div class='pre p1 fill-light mt0'>isUserSignedIn(): <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Boolean">Boolean</a></div>
















      <div class='py1 quiet mt1 prose-big'>Returns</div>
      <code><a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Boolean">Boolean</a></code>:
        <code>true</code>
 if the user is signed in,
<code>false</code>
 if not.














</section>




            <section class='p2 mb2 clearfix bg-white minishadow'>


  <div class='clearfix'>

    <h3 class='fl m0' id='signuserout'>
      signUserOut
    </h3>


  </div>


  <p>Sign the user out and optionally redirect to given location.</p>


  <div class='pre p1 fill-light mt0'>signUserOut(redirectURL: <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String">String</a>): void</div>











    <div class='py1 quiet mt1 prose-big'>Parameters</div>
    <div class='prose'>

        <div class='space-bottom0'>
          <div>
            <span class='code bold'>redirectURL</span> <code class='quiet'>(<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String">String</a>
            = <code>null</code>)</code>
	    Location to redirect user to after sign out.

          </div>

        </div>

    </div>






      <div class='py1 quiet mt1 prose-big'>Returns</div>
      <code>void</code>:















</section>




            <section class='p2 mb2 clearfix bg-white minishadow'>


  <div class='clearfix'>

    <h3 class='fl m0' id='makeauthrequest'>
      makeAuthRequest
    </h3>


  </div>


  <p>Generates an authentication request that can be sent to the Blockstack
browser for the user to approve sign in. This authentication request can
then be used for sign in by passing it to the <code>redirectToSignInWithAuthRequest</code>
method.</p>
<p><em>Note: This method should only be used if you want to roll your own authentication
flow. Typically you'd use <code>redirectToSignIn</code> which takes care of this
under the hood.</em></p>


  <div class='pre p1 fill-light mt0'>makeAuthRequest(transitPrivateKey: <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String">String</a>, redirectURI: <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String">String</a>, manifestURI: <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String">String</a>, scopes: <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array">Array</a>&#x3C;<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String">String</a>>, appDomain: <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String">String</a>, expiresAt: <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number">Number</a>): <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String">String</a></div>











    <div class='py1 quiet mt1 prose-big'>Parameters</div>
    <div class='prose'>

        <div class='space-bottom0'>
          <div>
            <span class='code bold'>transitPrivateKey</span> <code class='quiet'>(<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String">String</a>
            = <code>generateAndStoreTransitKey()</code>)</code>
	    hex encoded transit
private key

          </div>

        </div>

        <div class='space-bottom0'>
          <div>
            <span class='code bold'>redirectURI</span> <code class='quiet'>(<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String">String</a>
            = <code>`${window.location.origin}/`</code>)</code>
	    location to redirect user to after sign in approval

          </div>

        </div>

        <div class='space-bottom0'>
          <div>
            <span class='code bold'>manifestURI</span> <code class='quiet'>(<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String">String</a>
            = <code>`${window.location.origin}/manifest.json`</code>)</code>
	    location of this app's manifest file

          </div>

        </div>

        <div class='space-bottom0'>
          <div>
            <span class='code bold'>scopes</span> <code class='quiet'>(<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array">Array</a>&#x3C;<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String">String</a>>
            = <code>DEFAULT_SCOPE</code>)</code>
	    the permissions this app is requesting

          </div>

        </div>

        <div class='space-bottom0'>
          <div>
            <span class='code bold'>appDomain</span> <code class='quiet'>(<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String">String</a>
            = <code>window.location.origin</code>)</code>
	    the origin of this app

          </div>

        </div>

        <div class='space-bottom0'>
          <div>
            <span class='code bold'>expiresAt</span> <code class='quiet'>(<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number">Number</a>
            = <code>nextHour().getTime()</code>)</code>
	    the time at which this request is no longer valid

          </div>

        </div>

    </div>






      <div class='py1 quiet mt1 prose-big'>Returns</div>
      <code><a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String">String</a></code>:
        the authentication request














</section>




            <section class='p2 mb2 clearfix bg-white minishadow'>


  <div class='clearfix'>

    <h3 class='fl m0' id='redirecttosigninwithauthrequest'>
      redirectToSignInWithAuthRequest
    </h3>


  </div>


  <p>Redirects the user to the Blockstack browser to approve the sign in request
given.</p>
<p>The user is redirected to the <code>blockstackIDHost</code> if the <code>blockstack:</code>
protocol handler is not detected. Please note that the protocol handler detection
does not work on all browsers.</p>


  <div class='pre p1 fill-light mt0'>redirectToSignInWithAuthRequest(authRequest: <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String">String</a>, blockstackIDHost: <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String">String</a>): void</div>











    <div class='py1 quiet mt1 prose-big'>Parameters</div>
    <div class='prose'>

        <div class='space-bottom0'>
          <div>
            <span class='code bold'>authRequest</span> <code class='quiet'>(<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String">String</a>
            = <code>makeAuthRequest()</code>)</code>
	    the authentication request generated by
<code>makeAuthRequest</code>

          </div>

        </div>

        <div class='space-bottom0'>
          <div>
            <span class='code bold'>blockstackIDHost</span> <code class='quiet'>(<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String">String</a>
            = <code>DEFAULT_BLOCKSTACK_HOST</code>)</code>
	    the URL to redirect the user to if the blockstack
protocol handler is not detected

          </div>

        </div>

    </div>






      <div class='py1 quiet mt1 prose-big'>Returns</div>
      <code>void</code>:















</section>




            <section class='p2 mb2 clearfix bg-white minishadow'>


  <div class='clearfix'>

    <h3 class='fl m0' id='getauthresponsetoken'>
      getAuthResponseToken
    </h3>


  </div>


  <p>Retrieve the authentication token from the URL query</p>


  <div class='pre p1 fill-light mt0'>getAuthResponseToken(): <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String">String</a></div>
















      <div class='py1 quiet mt1 prose-big'>Returns</div>
      <code><a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String">String</a></code>:
        the authentication token if it exists otherwise
<code>null</code>














</section>




            <div class='keyline-top-not py2'><section class='py2 clearfix'>

  <h2 id='profiles' class='mt0'>
    Profiles
  </h2>


    <p>Follow these steps to create and register a profile for a Blockchain ID:</p>
<ol>
<li>Create a JSON profile object</li>
<li>Split up the profile into tokens, sign the tokens, and put them in a token file</li>
<li>Create a zone file that points to the web location of the profile token file</li>
</ol>
<h3>Create a profile</h3>
<pre class='hljs'>const profileOfNaval = {
  "@context": "http://schema.org/",
  "@type": "Person",
  "name": "Naval Ravikant",
  "description": "Co-founder of AngelList"
}</pre>
<h3>Sign a profile as a single token</h3>
<pre class='hljs'>import { makeECPrivateKey, wrapProfileToken, Person } from 'blockstack'

const privateKey = makeECPrivateKey()

const person = new Person(profileOfNaval)
const token = person.toToken(privateKey)
const tokenFile = [wrapProfileToken(token)]</pre>
<h3>Verify an individual token</h3>
<pre class='hljs'><span class="hljs-keyword">import</span> { verifyProfileToken } <span class="hljs-keyword">from</span> <span class="hljs-string">'blockstack'</span>

<span class="hljs-keyword">try</span> {
  <span class="hljs-keyword">const</span> decodedToken = verifyProfileToken(tokenFile[<span class="hljs-number">0</span>].token, publicKey)
} <span class="hljs-keyword">catch</span>(e) {
  <span class="hljs-built_in">console</span>.log(e)
}</pre>
<h3>Recover a profile from a token file</h3>
<pre class='hljs'><span class="hljs-keyword">const</span> recoveredProfile = Person.fromToken(tokenFile, publicKey)</pre>
<h3>Validate profile schema</h3>
<pre class='hljs'><span class="hljs-keyword">const</span> validationResults = Person.validateSchema(recoveredProfile)</pre>
<h3>Where profile data is stored</h3>
<p>Profile data is stored using Gaia on the user's selected storage provider.</p>
<p>An example of a profile.json file URL using Blockstack provided storage:
<code>https://gaia.blockstack.org/hub/1EeZtGNdFrVB2AgLFsZbyBCF7UTZcEWhHk/profile.json</code></p>
<h3>Validate a proof</h3>
<pre class='hljs'>import { validateProofs } from 'blockstack'

const domainName = "naval.id"
validateProofs(profile, domainName).then((proofs) =&gt; {
  console.log(proofs)
})</pre>
<h3>How proofs are validated</h3>
<p>The <code>validateProofs</code> function checks each of the proofs listed in the
profile by fetching the proof URL and verifying the proof message.</p>
<p>The proof message must be of the form:</p>
<pre><code>Verifying my Blockstack ID is secured with the address
1EeZtGNdFrVB2AgLFsZbyBCF7UTZcEWhHk
</code></pre>
<p>The proof message also must appear in the required location on the
proof page specific to each type of social media account.</p>
<p>The account from which the proof message is posted must match exactly
the account identifier/username claimed in the user profile. The
<code>validateProofs</code> function will check this in the body of the proof or
in the proof URL depending on the service.</p>
<h3>Adding additional social account validation services</h3>
<p>The <code>Service</code> class can be extended to provide proof validation service
to additional social account types. You will need to override the
<code>getProofStatement(searchText: string)</code> method which parses the proof
body and returns the proof message text. Additionally, the identifier
claimed should be verified in the proof URL or in the body by implementing
<code>getProofIdentity(searchText: string)</code> and setting <code>shouldValidateIdentityInBody()</code>
to return true.</p>
<p>The following snippet uses the meta tags in the proof page to retrieve the proof message.</p>
<pre class='hljs'><span class="hljs-keyword">static</span> getProofStatement(searchText: string) {
	<span class="hljs-keyword">const</span> $ = cheerio.load(searchText)
	<span class="hljs-keyword">const</span> statement = $(<span class="hljs-string">'meta[property="og:description"]'</span>)
	                    .attr(<span class="hljs-string">'content'</span>)

	<span class="hljs-keyword">if</span> (statement !== <span class="hljs-literal">undefined</span> &amp;&amp; statement.split(<span class="hljs-string">':'</span>).length &gt; <span class="hljs-number">1</span>) {
	  <span class="hljs-keyword">return</span> statement.split(<span class="hljs-string">':'</span>)[<span class="hljs-number">1</span>].trim().replace(<span class="hljs-string">'“'</span>, <span class="hljs-string">''</span>).replace(<span class="hljs-string">'”'</span>, <span class="hljs-string">''</span>)
	} <span class="hljs-keyword">else</span> {
	  <span class="hljs-keyword">return</span> <span class="hljs-string">''</span>
	}
}</pre>
<h3>Currently supported proof validation services</h3>
<ul>
<li>Facebook</li>
<li>Twitter</li>
<li>Instagram</li>
<li>LinkedIn</li>
<li>Hacker News</li>
<li>GitHub</li>
</ul>
<h3>Profile proof schema</h3>
<p>Proofs are stored under the <code>account</code> key in the user's profile data</p>
<pre class='hljs'><span class="hljs-string">"account"</span>: [
	{
	  <span class="hljs-string">"@type"</span>: <span class="hljs-string">"Account"</span>,
	  <span class="hljs-string">"service"</span>: <span class="hljs-string">"twitter"</span>,
	  <span class="hljs-string">"identifier"</span>: <span class="hljs-string">"naval"</span>,
	  <span class="hljs-string">"proofType"</span>: <span class="hljs-string">"http"</span>,
	  <span class="hljs-string">"proofUrl"</span>: <span class="hljs-string">"https://twitter.com/naval/status/12345678901234567890"</span>
	}
]</pre>


</section>
</div>



            <section class='p2 mb2 clearfix bg-white minishadow'>


  <div class='clearfix'>

    <h3 class='fl m0' id='extractprofile'>
      extractProfile
    </h3>


  </div>


  <p>Extracts a profile from an encoded token and optionally verifies it,
if <code>publicKeyOrAddress</code> is provided.</p>


  <div class='pre p1 fill-light mt0'>extractProfile(token: <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String">String</a>, publicKeyOrAddress: <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String">String</a>): <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object">Object</a></div>











    <div class='py1 quiet mt1 prose-big'>Parameters</div>
    <div class='prose'>

        <div class='space-bottom0'>
          <div>
            <span class='code bold'>token</span> <code class='quiet'>(<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String">String</a>)</code>
	    the token to be extracted

          </div>

        </div>

        <div class='space-bottom0'>
          <div>
            <span class='code bold'>publicKeyOrAddress</span> <code class='quiet'>(<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String">String</a>
            = <code>null</code>)</code>
	    the public key or address of the
keypair that is thought to have signed the token

          </div>

        </div>

    </div>






      <div class='py1 quiet mt1 prose-big'>Returns</div>
      <code><a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object">Object</a></code>:
        the profile extracted from the encoded token






    <div class='py1 quiet mt1 prose-big'>Throws</div>
    <ul>

        <li><a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Error">Error</a>: if the token isn't signed by the provided
<code>publicKeyOrAddress</code>
</li>

    </ul>









</section>




            <section class='p2 mb2 clearfix bg-white minishadow'>


  <div class='clearfix'>

    <h3 class='fl m0' id='wrapprofiletoken'>
      wrapProfileToken
    </h3>


  </div>


  <p>Wraps a token for a profile token file</p>


  <div class='pre p1 fill-light mt0'>wrapProfileToken(token: <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String">String</a>): <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object">Object</a></div>











    <div class='py1 quiet mt1 prose-big'>Parameters</div>
    <div class='prose'>

        <div class='space-bottom0'>
          <div>
            <span class='code bold'>token</span> <code class='quiet'>(<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String">String</a>)</code>
	    the token to be wrapped

          </div>

        </div>

    </div>






      <div class='py1 quiet mt1 prose-big'>Returns</div>
      <code><a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object">Object</a></code>:
        including
<code>token</code>
 and
<code>decodedToken</code>














</section>




            <section class='p2 mb2 clearfix bg-white minishadow'>


  <div class='clearfix'>

    <h3 class='fl m0' id='signprofiletoken'>
      signProfileToken
    </h3>


  </div>


  <p>Signs a profile token</p>


  <div class='pre p1 fill-light mt0'>signProfileToken(profile: <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object">Object</a>, privateKey: <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String">String</a>, subject: <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object">Object</a>, issuer: <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object">Object</a>, signingAlgorithm: <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String">String</a>, issuedAt: <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Date">Date</a>, expiresAt: <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Date">Date</a>): <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object">Object</a></div>











    <div class='py1 quiet mt1 prose-big'>Parameters</div>
    <div class='prose'>

        <div class='space-bottom0'>
          <div>
            <span class='code bold'>profile</span> <code class='quiet'>(<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object">Object</a>)</code>
	    the JSON of the profile to be signed

          </div>

        </div>

        <div class='space-bottom0'>
          <div>
            <span class='code bold'>privateKey</span> <code class='quiet'>(<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String">String</a>)</code>
	    the signing private key

          </div>

        </div>

        <div class='space-bottom0'>
          <div>
            <span class='code bold'>subject</span> <code class='quiet'>(<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object">Object</a>
            = <code>null</code>)</code>
	    the entity that the information is about

          </div>

        </div>

        <div class='space-bottom0'>
          <div>
            <span class='code bold'>issuer</span> <code class='quiet'>(<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object">Object</a>
            = <code>null</code>)</code>
	    the entity that is issuing the token

          </div>

        </div>

        <div class='space-bottom0'>
          <div>
            <span class='code bold'>signingAlgorithm</span> <code class='quiet'>(<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String">String</a>
            = <code>&#39;ES256K&#39;</code>)</code>
	    the signing algorithm to use

          </div>

        </div>

        <div class='space-bottom0'>
          <div>
            <span class='code bold'>issuedAt</span> <code class='quiet'>(<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Date">Date</a>
            = <code>new Date()</code>)</code>
	    the time of issuance of the token

          </div>

        </div>

        <div class='space-bottom0'>
          <div>
            <span class='code bold'>expiresAt</span> <code class='quiet'>(<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Date">Date</a>
            = <code>nextYear()</code>)</code>
	    the time of expiration of the token

          </div>

        </div>

    </div>






      <div class='py1 quiet mt1 prose-big'>Returns</div>
      <code><a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object">Object</a></code>:
        the signed profile token














</section>




            <section class='p2 mb2 clearfix bg-white minishadow'>


  <div class='clearfix'>

    <h3 class='fl m0' id='verifyprofiletoken'>
      verifyProfileToken
    </h3>


  </div>


  <p>Verifies a profile token</p>


  <div class='pre p1 fill-light mt0'>verifyProfileToken(token: <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String">String</a>, publicKeyOrAddress: <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String">String</a>): <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object">Object</a></div>











    <div class='py1 quiet mt1 prose-big'>Parameters</div>
    <div class='prose'>

        <div class='space-bottom0'>
          <div>
            <span class='code bold'>token</span> <code class='quiet'>(<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String">String</a>)</code>
	    the token to be verified

          </div>

        </div>

        <div class='space-bottom0'>
          <div>
            <span class='code bold'>publicKeyOrAddress</span> <code class='quiet'>(<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String">String</a>)</code>
	    the public key or address of the
keypair that is thought to have signed the token

          </div>

        </div>

    </div>






      <div class='py1 quiet mt1 prose-big'>Returns</div>
      <code><a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object">Object</a></code>:
        the verified, decoded profile token






    <div class='py1 quiet mt1 prose-big'>Throws</div>
    <ul>

        <li><a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Error">Error</a>: throws an error if token verification fails
</li>

    </ul>









</section>




            <section class='p2 mb2 clearfix bg-white minishadow'>


  <div class='clearfix'>

    <h3 class='fl m0' id='validateproofs'>
      validateProofs
    </h3>


  </div>


  <p>Validates the social proofs in a user's profile. Currently supports validation of
Facebook, Twitter, GitHub, Instagram, LinkedIn and HackerNews accounts.</p>


  <div class='pre p1 fill-light mt0'>validateProofs(profile: <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object">Object</a>, ownerAddress: <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String">string</a>, name: <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String">string</a>): <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise">Promise</a></div>











    <div class='py1 quiet mt1 prose-big'>Parameters</div>
    <div class='prose'>

        <div class='space-bottom0'>
          <div>
            <span class='code bold'>profile</span> <code class='quiet'>(<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object">Object</a>)</code>
	    The JSON of the profile to be validated

          </div>

        </div>

        <div class='space-bottom0'>
          <div>
            <span class='code bold'>ownerAddress</span> <code class='quiet'>(<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String">string</a>)</code>
	    The owner bitcoin address to be validated

          </div>

        </div>

        <div class='space-bottom0'>
          <div>
            <span class='code bold'>name</span> <code class='quiet'>(<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String">string</a>
            = <code>null</code>)</code>
	    The Blockstack name to be validated

          </div>

        </div>

    </div>






      <div class='py1 quiet mt1 prose-big'>Returns</div>
      <code><a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise">Promise</a></code>:
        that resolves to an array of validated proof objects














</section>




            <section class='p2 mb2 clearfix bg-white minishadow'>


  <div class='clearfix'>

    <h3 class='fl m0' id='lookupprofile'>
      lookupProfile
    </h3>


  </div>


  <p>Look up a user profile by blockstack ID</p>


  <div class='pre p1 fill-light mt0'>lookupProfile(username: <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String">string</a>, zoneFileLookupURL: <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String">string</a>): <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise">Promise</a></div>











    <div class='py1 quiet mt1 prose-big'>Parameters</div>
    <div class='prose'>

        <div class='space-bottom0'>
          <div>
            <span class='code bold'>username</span> <code class='quiet'>(<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String">string</a>)</code>
	    The Blockstack ID of the profile to look up

          </div>

        </div>

        <div class='space-bottom0'>
          <div>
            <span class='code bold'>zoneFileLookupURL</span> <code class='quiet'>(<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String">string</a>
            = <code>null</code>)</code>
	    The URL
to use for zonefile lookup. If falsey, lookupProfile will use the
blockstack.js getNameInfo function.

          </div>

        </div>

    </div>






      <div class='py1 quiet mt1 prose-big'>Returns</div>
      <code><a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise">Promise</a></code>:
        that resolves to a profile object














</section>




            <div class='keyline-top-not py2'><section class='py2 clearfix'>

  <h2 id='storage' class='mt0'>
    Storage
  </h2>


    <blockquote>
<p><strong>Notes</strong>:</p>
<p>1) Blockstack Gaia Storage APIs and on-disk format will change in
upcoming pre-releases breaking backward compatibility. File encryption is currently
opt-in on a file by file basis.</p>
<p>2) Certain storage features such as and collections are not implemented in the current
version. These features will be rolled out in future updates.</p>
</blockquote>
<h2>Creating a file</h2>
<pre class='hljs'> blockstack.putFile(<span class="hljs-string">"/hello.txt"</span>, <span class="hljs-string">"hello world!"</span>)
 .then(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
    <span class="hljs-comment">// /hello.txt exists now, and has the contents "hello world!".</span>
 })</pre>
<h2>Reading a file</h2>
<pre class='hljs'> blockstack.getFile(<span class="hljs-string">"/hello.txt"</span>)
 .then(<span class="hljs-function">(<span class="hljs-params">fileContents</span>) =&gt;</span> {
    <span class="hljs-comment">// get the contents of the file /hello.txt</span>
    assert(fileContents === <span class="hljs-string">"hello world!"</span>)
 });</pre>
<h2>Creating an encrypted file</h2>
<pre class='hljs'> <span class="hljs-keyword">let</span> options = {
   <span class="hljs-attr">encrypt</span>: <span class="hljs-literal">true</span>
 }

 blockstack.putFile(<span class="hljs-string">"/message.txt"</span>, <span class="hljs-string">"Secret hello!"</span>, options)
 .then(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
    <span class="hljs-comment">// message.txt exists now, and has the contents "hello world!".</span>
 })</pre>
<h2>Reading an encrypted file</h2>
<pre class='hljs'> <span class="hljs-keyword">let</span> options = {
   <span class="hljs-attr">decrypt</span>: <span class="hljs-literal">true</span>
 }

 blockstack.getFile(<span class="hljs-string">"/message.txt"</span>, options)
 .then(<span class="hljs-function">(<span class="hljs-params">fileContents</span>) =&gt;</span> {
    <span class="hljs-comment">// get &amp; decrypt the contents of the file /message.txt</span>
    assert(fileContents === <span class="hljs-string">"Secret hello!"</span>)
 });</pre>
<h2>Reading another user's unencrypted file</h2>
<p>In order for files to be publicly readable, the app must request
the <code>publish_data</code> scope during authentication.</p>
<pre class='hljs'> <span class="hljs-keyword">let</span> options = {
   <span class="hljs-attr">user</span>: <span class="hljs-string">'ryan.id'</span>, <span class="hljs-comment">// the Blockstack ID of the user for which to lookup the file</span>
   app: <span class="hljs-string">'http://BlockstackApp.com'</span> <span class="hljs-comment">// origin of the app this file is stored for</span>
 }

 blockstack.getFile(<span class="hljs-string">"/message.txt"</span>, options)
 .then(<span class="hljs-function">(<span class="hljs-params">fileContents</span>) =&gt;</span> {
    <span class="hljs-comment">// get the contents of the file /message.txt</span>
    assert(fileContents === <span class="hljs-string">"hello world!"</span>)
 });</pre>
<h2>Deleting a file</h2>
<p><em>Note: deleteFile is currently not implemented. For now, we recommend
writing an empty file to wipe data</em></p>
<pre class='hljs'> blockstack.deleteFile(<span class="hljs-string">"/hello.txt"</span>)
 .then(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
    <span class="hljs-comment">// /hello.txt is now removed.</span>
 })</pre>


</section>
</div>



            <section class='p2 mb2 clearfix bg-white minishadow'>


  <div class='clearfix'>

    <h3 class='fl m0' id='getfile'>
      getFile
    </h3>


  </div>


  <p>Retrieves the specified file from the app's data store.</p>


  <div class='pre p1 fill-light mt0'>getFile(path: <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String">String</a>, options: <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object">Object</a>): <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise">Promise</a></div>











    <div class='py1 quiet mt1 prose-big'>Parameters</div>
    <div class='prose'>

        <div class='space-bottom0'>
          <div>
            <span class='code bold'>path</span> <code class='quiet'>(<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String">String</a>)</code>
	    the path to the file to read

          </div>

        </div>

        <div class='space-bottom0'>
          <div>
            <span class='code bold'>options</span> <code class='quiet'>(<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object">Object</a>
            = <code>null</code>)</code>
	    options object

          </div>

          <table class='mt1 mb2 fixed-table h5 col-12'>
            <colgroup>
              <col width='30%' />
              <col width='70%' />
            </colgroup>
            <thead>
              <tr class='bold fill-light'>
                <th>Name</th>
                <th>Description</th>
              </tr>
            </thead>
            <tbody class='mt1'>

                <tr>
  <td class='break-word'><span class='code bold'>options.decrypt</span> <code class='quiet'><a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Boolean">Boolean</a></code>

    (default <code>true</code>)
  </td>
  <td class='break-word'><span>try to decrypt the data with the app private key
</span></td>
</tr>



                <tr>
  <td class='break-word'><span class='code bold'>options.username</span> <code class='quiet'><a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String">String</a></code>
  </td>
  <td class='break-word'><span>the Blockstack ID to lookup for multi-player storage
</span></td>
</tr>



                <tr>
  <td class='break-word'><span class='code bold'>options.verify</span> <code class='quiet'><a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Boolean">Boolean</a></code>
  </td>
  <td class='break-word'><span>Whether the content should be verified, only to be used
when
<code>putFile</code>
 was set to
<code>sign = true</code>
</span></td>
</tr>



                <tr>
  <td class='break-word'><span class='code bold'>options.app</span> <code class='quiet'><a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String">String</a></code>
  </td>
  <td class='break-word'><span>the app to lookup for multi-player storage -
defaults to current origin
</span></td>
</tr>



                <tr>
  <td class='break-word'><span class='code bold'>options.zoneFileLookupURL</span> <code class='quiet'><a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String">String</a></code>

    (default <code>null</code>)
  </td>
  <td class='break-word'><span>The URL
to use for zonefile lookup. If falsey, this will use the
blockstack.js's getNameInfo function instead.
</span></td>
</tr>



            </tbody>
          </table>

        </div>

    </div>






      <div class='py1 quiet mt1 prose-big'>Returns</div>
      <code><a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise">Promise</a></code>:
        that resolves to the raw data in the file
or rejects with an error














</section>




            <section class='p2 mb2 clearfix bg-white minishadow'>


  <div class='clearfix'>

    <h3 class='fl m0' id='putfile'>
      putFile
    </h3>


  </div>


  <p>Stores the data provided in the app's data store to to the file specified.</p>


  <div class='pre p1 fill-light mt0'>putFile(path: <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String">String</a>, content: (<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String">String</a> | <a href="https://nodejs.org/api/buffer.html">Buffer</a>), options: <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object">Object</a>): <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise">Promise</a></div>











    <div class='py1 quiet mt1 prose-big'>Parameters</div>
    <div class='prose'>

        <div class='space-bottom0'>
          <div>
            <span class='code bold'>path</span> <code class='quiet'>(<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String">String</a>)</code>
	    the path to store the data in

          </div>

        </div>

        <div class='space-bottom0'>
          <div>
            <span class='code bold'>content</span> <code class='quiet'>((<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String">String</a> | <a href="https://nodejs.org/api/buffer.html">Buffer</a>))</code>
	    the data to store in the file

          </div>

        </div>

        <div class='space-bottom0'>
          <div>
            <span class='code bold'>options</span> <code class='quiet'>(<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object">Object</a>
            = <code>null</code>)</code>
	    options object

          </div>

          <table class='mt1 mb2 fixed-table h5 col-12'>
            <colgroup>
              <col width='30%' />
              <col width='70%' />
            </colgroup>
            <thead>
              <tr class='bold fill-light'>
                <th>Name</th>
                <th>Description</th>
              </tr>
            </thead>
            <tbody class='mt1'>

                <tr>
  <td class='break-word'><span class='code bold'>options.encrypt</span> <code class='quiet'>(<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Boolean">Boolean</a> | <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String">String</a>)</code>

    (default <code>true</code>)
  </td>
  <td class='break-word'><span>encrypt the data with the app private key
or the provided public key
</span></td>
</tr>



                <tr>
  <td class='break-word'><span class='code bold'>options.sign</span> <code class='quiet'><a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Boolean">Boolean</a></code>

    (default <code>false</code>)
  </td>
  <td class='break-word'><span>sign the data using ECDSA on SHA256 hashes with
the app private key
</span></td>
</tr>



            </tbody>
          </table>

        </div>

    </div>






      <div class='py1 quiet mt1 prose-big'>Returns</div>
      <code><a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise">Promise</a></code>:
        that resolves if the operation succeed and rejects
if it failed














</section>




            <section class='p2 mb2 clearfix bg-white minishadow'>


  <div class='clearfix'>

    <h3 class='fl m0' id='encryptcontent'>
      encryptContent
    </h3>


  </div>


  <p>Encrypts the data provided with the app public key.</p>


  <div class='pre p1 fill-light mt0'>encryptContent(content: (<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String">String</a> | <a href="https://nodejs.org/api/buffer.html">Buffer</a>), options: <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object">Object</a>): <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String">String</a></div>











    <div class='py1 quiet mt1 prose-big'>Parameters</div>
    <div class='prose'>

        <div class='space-bottom0'>
          <div>
            <span class='code bold'>content</span> <code class='quiet'>((<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String">String</a> | <a href="https://nodejs.org/api/buffer.html">Buffer</a>))</code>
	    data to encrypt

          </div>

        </div>

        <div class='space-bottom0'>
          <div>
            <span class='code bold'>options</span> <code class='quiet'>(<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object">Object</a>
            = <code>null</code>)</code>
	    options object

          </div>

          <table class='mt1 mb2 fixed-table h5 col-12'>
            <colgroup>
              <col width='30%' />
              <col width='70%' />
            </colgroup>
            <thead>
              <tr class='bold fill-light'>
                <th>Name</th>
                <th>Description</th>
              </tr>
            </thead>
            <tbody class='mt1'>

                <tr>
  <td class='break-word'><span class='code bold'>options.publicKey</span> <code class='quiet'><a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String">String</a></code>
  </td>
  <td class='break-word'><span>the hex string of the ECDSA public
key to use for encryption. If not provided, will use user's appPrivateKey.
</span></td>
</tr>



            </tbody>
          </table>

        </div>

    </div>






      <div class='py1 quiet mt1 prose-big'>Returns</div>
      <code><a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String">String</a></code>:
        Stringified ciphertext object














</section>




            <section class='p2 mb2 clearfix bg-white minishadow'>


  <div class='clearfix'>

    <h3 class='fl m0' id='decryptcontent'>
      decryptContent
    </h3>


  </div>


  <p>Decrypts data encrypted with <code>encryptContent</code> with the
transit private key.</p>


  <div class='pre p1 fill-light mt0'>decryptContent(content: (<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String">String</a> | <a href="https://nodejs.org/api/buffer.html">Buffer</a>), options: <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object">Object</a>): (<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String">String</a> | <a href="https://nodejs.org/api/buffer.html">Buffer</a>)</div>











    <div class='py1 quiet mt1 prose-big'>Parameters</div>
    <div class='prose'>

        <div class='space-bottom0'>
          <div>
            <span class='code bold'>content</span> <code class='quiet'>((<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String">String</a> | <a href="https://nodejs.org/api/buffer.html">Buffer</a>))</code>
	    encrypted content.

          </div>

        </div>

        <div class='space-bottom0'>
          <div>
            <span class='code bold'>options</span> <code class='quiet'>(<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object">Object</a>
            = <code>null</code>)</code>
	    options object

          </div>

          <table class='mt1 mb2 fixed-table h5 col-12'>
            <colgroup>
              <col width='30%' />
              <col width='70%' />
            </colgroup>
            <thead>
              <tr class='bold fill-light'>
                <th>Name</th>
                <th>Description</th>
              </tr>
            </thead>
            <tbody class='mt1'>

                <tr>
  <td class='break-word'><span class='code bold'>options.privateKey</span> <code class='quiet'><a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String">String</a></code>
  </td>
  <td class='break-word'><span>the hex string of the ECDSA private
key to use for decryption. If not provided, will use user's appPrivateKey.
</span></td>
</tr>



            </tbody>
          </table>

        </div>

    </div>






      <div class='py1 quiet mt1 prose-big'>Returns</div>
      <code>(<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String">String</a> | <a href="https://nodejs.org/api/buffer.html">Buffer</a>)</code>:
        decrypted content.














</section>




            <section class='p2 mb2 clearfix bg-white minishadow'>


  <div class='clearfix'>

    <h3 class='fl m0' id='getappbucketurl'>
      getAppBucketUrl
    </h3>


  </div>


  <p>Get the app storage bucket URL</p>


  <div class='pre p1 fill-light mt0'>getAppBucketUrl(gaiaHubUrl: <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String">String</a>, appPrivateKey: <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String">String</a>): <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise">Promise</a></div>











    <div class='py1 quiet mt1 prose-big'>Parameters</div>
    <div class='prose'>

        <div class='space-bottom0'>
          <div>
            <span class='code bold'>gaiaHubUrl</span> <code class='quiet'>(<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String">String</a>)</code>
	    the gaia hub URL

          </div>

        </div>

        <div class='space-bottom0'>
          <div>
            <span class='code bold'>appPrivateKey</span> <code class='quiet'>(<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String">String</a>)</code>
	    the app private key used to generate the app address

          </div>

        </div>

    </div>






      <div class='py1 quiet mt1 prose-big'>Returns</div>
      <code><a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise">Promise</a></code>:
        That resolves to the URL of the app index file
or rejects if it fails














</section>




            <section class='p2 mb2 clearfix bg-white minishadow'>


  <div class='clearfix'>

    <h3 class='fl m0' id='getuserappfileurl'>
      getUserAppFileUrl
    </h3>


  </div>


  <p>Fetch the public read URL of a user file for the specified app.</p>


  <div class='pre p1 fill-light mt0'>getUserAppFileUrl(path: <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String">String</a>, username: <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String">String</a>, appOrigin: <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String">String</a>, zoneFileLookupURL: <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String">String</a>): <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise">Promise</a></div>











    <div class='py1 quiet mt1 prose-big'>Parameters</div>
    <div class='prose'>

        <div class='space-bottom0'>
          <div>
            <span class='code bold'>path</span> <code class='quiet'>(<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String">String</a>)</code>
	    the path to the file to read

          </div>

        </div>

        <div class='space-bottom0'>
          <div>
            <span class='code bold'>username</span> <code class='quiet'>(<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String">String</a>)</code>
	    The Blockstack ID of the user to look up

          </div>

        </div>

        <div class='space-bottom0'>
          <div>
            <span class='code bold'>appOrigin</span> <code class='quiet'>(<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String">String</a>)</code>
	    The app origin

          </div>

        </div>

        <div class='space-bottom0'>
          <div>
            <span class='code bold'>zoneFileLookupURL</span> <code class='quiet'>(<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String">String</a>
            = <code>null</code>)</code>
	    The URL
to use for zonefile lookup. If falsey, this will use the
blockstack.js's getNameInfo function instead.

          </div>

        </div>

    </div>






      <div class='py1 quiet mt1 prose-big'>Returns</div>
      <code><a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise">Promise</a></code>:
        that resolves to the public read URL of the file
or rejects with an error














</section>



      </div>
    </div>
  <script src='../assets/anchor.js'></script>
  <script src='../assets/split.js'></script>
  <script src='../assets/site.js'></script>
  <footer class="uk-section uk-text-center uk-text-muted uk-link-muted">
    <div class="uk-container uk-container-small">

        <div>
            <ul class="uk-subnav uk-flex-center">




                        <li><a href="/">Help</a></li>





                        <li><a href="/news/">News</a></li>





                        <li><a href="/contact/">Contact</a></li>


            </ul>
        </div>
        <div class="uk-margin-medium">
            <div data-uk-grid="" class="uk-child-width-auto uk-grid-small uk-flex-center uk-grid">

<div class="uk-first-column">
    <a href="https://twitter.com/" data-uk-icon="icon: twitter" class="uk-icon-link uk-icon" target="_blank"><svg width="20" height="20" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" ratio="1"> <path d="M19,4.74 C18.339,5.029 17.626,5.229 16.881,5.32 C17.644,4.86 18.227,4.139 18.503,3.28 C17.79,3.7 17.001,4.009 16.159,4.17 C15.485,3.45 14.526,3 13.464,3 C11.423,3 9.771,4.66 9.771,6.7 C9.771,6.99 9.804,7.269 9.868,7.539 C6.795,7.38 4.076,5.919 2.254,3.679 C1.936,4.219 1.754,4.86 1.754,5.539 C1.754,6.82 2.405,7.95 3.397,8.61 C2.79,8.589 2.22,8.429 1.723,8.149 L1.723,8.189 C1.723,9.978 2.997,11.478 4.686,11.82 C4.376,11.899 4.049,11.939 3.713,11.939 C3.475,11.939 3.245,11.919 3.018,11.88 C3.49,13.349 4.852,14.419 6.469,14.449 C5.205,15.429 3.612,16.019 1.882,16.019 C1.583,16.019 1.29,16.009 1,15.969 C2.635,17.019 4.576,17.629 6.662,17.629 C13.454,17.629 17.17,12 17.17,7.129 C17.17,6.969 17.166,6.809 17.157,6.649 C17.879,6.129 18.504,5.478 19,4.74"></path></svg></a>
</div>


<div>
    <a href="https://www.facebook.com/" data-uk-icon="icon: facebook" class="uk-icon-link uk-icon" target="_blank"><svg width="20" height="20" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" ratio="1"> <path d="M11,10h2.6l0.4-3H11V5.3c0-0.9,0.2-1.5,1.5-1.5H14V1.1c-0.3,0-1-0.1-2.1-0.1C9.6,1,8,2.4,8,5v2H5.5v3H8v8h3V10z"></path></svg></a>
</div>




<div>
    <a href="https://www.instagram.com/" data-uk-icon="icon: instagram" class="uk-icon-link uk-icon" target="_blank"><svg width="20" height="20" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" ratio="1"> <path d="M13.55,1H6.46C3.45,1,1,3.44,1,6.44v7.12c0,3,2.45,5.44,5.46,5.44h7.08c3.02,0,5.46-2.44,5.46-5.44V6.44 C19.01,3.44,16.56,1,13.55,1z M17.5,14c0,1.93-1.57,3.5-3.5,3.5H6c-1.93,0-3.5-1.57-3.5-3.5V6c0-1.93,1.57-3.5,3.5-3.5h8 c1.93,0,3.5,1.57,3.5,3.5V14z"></path> <circle cx="14.87" cy="5.26" r="1.09"></circle> <path d="M10.03,5.45c-2.55,0-4.63,2.06-4.63,4.6c0,2.55,2.07,4.61,4.63,4.61c2.56,0,4.63-2.061,4.63-4.61 C14.65,7.51,12.58,5.45,10.03,5.45L10.03,5.45L10.03,5.45z M10.08,13c-1.66,0-3-1.34-3-2.99c0-1.65,1.34-2.99,3-2.99s3,1.34,3,2.99 C13.08,11.66,11.74,13,10.08,13L10.08,13L10.08,13z"></path></svg></a>
</div>





<div>
    <a href="https://vimeo.com/" data-uk-icon="icon: vimeo" class="uk-icon-link uk-icon" target="_blank"><svg width="20" height="20" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" ratio="1"> <path d="M2.065,7.59C1.84,7.367,1.654,7.082,1.468,6.838c-0.332-0.42-0.137-0.411,0.274-0.772c1.026-0.91,2.004-1.896,3.127-2.688 c1.017-0.713,2.365-1.173,3.286-0.039c0.849,1.045,0.869,2.629,1.084,3.891c0.215,1.309,0.421,2.648,0.88,3.901 c0.127,0.352,0.37,1.018,0.81,1.074c0.567,0.078,1.145-0.917,1.408-1.289c0.684-0.987,1.611-2.317,1.494-3.587 c-0.115-1.349-1.572-1.095-2.482-0.773c0.146-1.514,1.555-3.216,2.912-3.792c1.439-0.597,3.579-0.587,4.302,1.036 c0.772,1.759,0.078,3.802-0.763,5.396c-0.918,1.731-2.1,3.333-3.363,4.829c-1.114,1.329-2.432,2.787-4.093,3.422 c-1.897,0.723-3.021-0.686-3.667-2.318c-0.705-1.777-1.056-3.771-1.565-5.621C4.898,8.726,4.644,7.836,4.136,7.191 C3.473,6.358,2.72,7.141,2.065,7.59C1.977,7.502,2.115,7.551,2.065,7.59L2.065,7.59z"></path></svg></a>
</div>






            </div>
        </div>
        <div class="uk-margin-medium uk-text-small copyright">Made by a <a href="https://ivanchromjak.com/">human</a> somewhere on the planet earth.</div>

    </div>
</footer>
</body>
</html>
